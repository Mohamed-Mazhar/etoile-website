<div class="container">
  <app-loading [loadingData]="loading"></app-loading>
  <div class="alert alert-danger form-alert" *ngIf="errorMessage !== null">{{ errorMessage }}</div>
  <div class="checkout-container" *ngIf="cartProductItems.isNotEmpty()">
    <div class="tabs-container">
      <div class="nav">
        <div class="nav-item active"
             (click)="activeTab !== 'confirm' ? activeTab = 'shipping' : ''"
             [ngClass]="{'active': activeTab === 'shipping'}">
          <i class="fas fa-motorcycle"></i>
          <p>{{ 'SHIPPING' | translate }}</p>
        </div>
        <div class="checkout-tabs-separator"></div>
        <div class="nav-item"
             [ngClass]="{'active': activeTab === 'payment'}">
          <i class="fas fa-credit-card"></i>
          <p>{{ 'PAYMENT' | translate }}</p>
        </div>
        <div class="checkout-tabs-separator"></div>
        <div class="nav-item"
             [ngClass]="{'active': activeTab === 'confirm'}">
          <i class="fas fa-check-circle"></i>
          <p>{{ 'CONFIRMATION' | translate }}</p>
        </div>
      </div>
      <div class="tab-content">
        <div class='tab-pane container fade active show' id='shipping'
             [ngClass]="{'show': activeTab === 'shipping', 'active': activeTab === 'shipping'}">
          <app-shipping-tab [addresses]="addresses" (onProceedClicked)="moveToPayment($event)"></app-shipping-tab>
        </div>
        <div class='tab-pane container fade' id='payment'
             [ngClass]="{'show': activeTab === 'payment', 'active': activeTab === 'payment' }">
          <app-payments-tab [loading]="placingOrder" (onPayClicked)="placeOrder($event)"></app-payments-tab>
        </div>
        <div class='tab-pane container fade' id='confirm'
             [ngClass]="{'show': activeTab === 'confirm', 'active': activeTab === 'confirm' }">
          <div class="text-center">
            <img class="order-success-image" src="assets/images/order-success-image.jpg">
            <p>{{ 'ORDER_SUCCESS' | translate : {orderId: orderId} }}</p>
            <primary-button
              routerLink="/"
              title="Check Order Details"
              class="d-flex justify-content-center mt-2">
            </primary-button>
          </div>
        </div>
      </div>
    </div>
    <app-checkout-order-summary
      [products]="cartProductItems"
      (onCouponAppliedSuccessfully)="applyCoupon($event)"
      [showExtraDetails]="activeTab === 'payment'"
      class="order-summary">
    </app-checkout-order-summary>
  </div>
  <div class="empty-cart" *ngIf="cartProductItems.isEmpty()">
    <img src="https://etoileeg.online/public/Content/images/basket.png" loading="lazy">
    <p>{{ 'EMPTY_CART' | translate }}</p>
    <primary-button
      class="d-flex justify-content-center mt-2"
      routerLink="/"
      [buttonPadding]="0.5"
      [title]="'GO_SHOPPING' | translate">
    </primary-button>
  </div>
</div>
